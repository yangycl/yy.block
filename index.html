<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>é¦–é </title>
  <style>
    h1 {
      color: #ff0202f5;
    }
  </style>
</head>
<body>
  <p>é€™æ˜¯ç¨‹å¼ç©æœ¨</p>

  <button id="gitlogin">gitç™»å…¥</button>

  <input id="userid" placeholder="User ID" />
  <input id="password" placeholder="Password" />
  <input id="email" placeholder="Email" />
  <button onclick="sendData()">é€å‡º</button>

  <p id="message"></p>

  <button class="big-button" onclick="location.href='https://yangycl.github.io/yy.block/eait-dev.html'">
    ğŸ§± é–‹å§‹ç·¨ç¨‹
  </button>

  <h1>é–‹ç™¼ä¸­</h1>
  <p>é€™æ˜¯é¦–é çš„å…§å®¹ã€‚</p>

  <script type="module">
    import { supabase } from './supabaseClient.js';

    // GitHub ç™»å…¥
    document.getElementById('gitlogin')?.addEventListener('click', async () => {
      const { data, error } = await supabase.auth.signInWithOAuth({
        provider: 'github',
      });
      if (error) {
        showMessage('ç™»å…¥å¤±æ•—ï¼š' + error.message);
      }
    });

    // é¡¯ç¤ºè¨Šæ¯
    function showMessage(msg) {
      const el = document.getElementById('message');
      if (el) el.innerText = msg;
    }

    // å°‡è³‡æ–™é€å‡ºè‡³ Supabase
    window.sendData = function () {
      const data = {
        userid: document.getElementById("userid").value,
        password: document.getElementById("password").value,
        email: document.getElementById("email").value,
      };

      fetch("https://vfqedrijjknhydradytf.supabase.co/rest/v1/rpc/userdata", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZmcWVkcmlqamtuaHlkcmFkeXRmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5ODM5MjIsImV4cCI6MjA3MTU1OTkyMn0.ipt6AD1IwN0XxMqPWggGx_543dnAIbkaYeLzidj5cFA",
          
        },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(response => {
        console.log("æˆåŠŸé€å‡ºè³‡æ–™", response);
        showMessage("è³‡æ–™å·²é€å‡ºï¼");
      })
      .catch(error => {
        console.error("éŒ¯èª¤ç™¼ç”Ÿ", error);
        showMessage("éŒ¯èª¤ç™¼ç”Ÿï¼š" + error.message);
      });
    }
  </script>
</body>
</html>

